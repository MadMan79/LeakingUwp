<Page
    x:Class="LeakingUwpApp.Views.SecondaryPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    NavigationCacheMode="Disabled"
    mc:Ignorable="d">
    
    <Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
        <TextBlock Text="Content here does not matter, but AppBarButton on this page is causing the leak. Just click Back and check out memory usage." HorizontalAlignment="Center" TextWrapping="WrapWholeWords"/>
    </Grid>

    <Page.BottomAppBar>
        <CommandBar>
            <AppBarButton Command="{x:Bind ViewModel.LeakingCommand}" Label="Leak" Icon="People"/> <!-- Leak is here! Change x:Bind to Binding, or project target version from 10568 to 14393 to fix -->
        </CommandBar>
    </Page.BottomAppBar>
</Page>

